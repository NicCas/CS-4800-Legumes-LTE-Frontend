{"version":3,"sources":["account/Account.js","assets/owner_placeholder.png"],"names":["CurrentOrder","lazy","axios","defaults","withCredentials","Account","state","customer","addresses","billings","shippings","deliveries","delivs","transporting","transits","deliv_items","favs","handlers","handler","items","store","get","then","res","data","billing_addrs","favorites","Favorite_Items","shipping_addrs","order_nos","item_props","in_transit","setState","customer_info","i","length","Is_Billing","push","Is_Shipping","Delivered","sort","a","b","Date","catch","error","console","log","id","class","src","account","this","Username","href","onClick","handleLogout","Email","Street","City","State","Zip_Code","map","Item_Name","Store_ID","Price","toFixed","Delivery_ID","Total_Cost","React","Component"],"mappings":"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","file":"static/js/14.32c03448.chunk.js","sourcesContent":["import React, { lazy } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Account.css\";\r\nimport account from \"../assets/owner_placeholder.png\";\r\n\r\nconst CurrentOrder = lazy(() => import(\"./CurrentOrder\"));\r\n\r\naxios.defaults.withCredentials = true;\r\n\r\nexport default class Account extends React.Component {\r\n  state = {\r\n    customer: {},\r\n    addresses: [],\r\n    billings: [],\r\n    shippings: [],\r\n    deliveries: [],\r\n    delivs: [],\r\n    transporting: [],\r\n    transits: [],\r\n    deliv_items: [],\r\n    favs: [],\r\n    handlers: [],\r\n    handler: {},\r\n    items: [],\r\n    store: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(\r\n        `https://chickpeaapi.glitch.me/user/account-details`,\r\n        /*`https://chickpeaapi.glitch.me/stores`,*/ { withCredentials: true }\r\n      )\r\n      .then((res) => {\r\n        const data = res.data;\r\n        const favorite = res.data.favorites.Favorite_Items;\r\n        var billing_addrs = [];\r\n        var shipping_addrs = [];\r\n        var order_nos = [];\r\n        var delivered_items = [];\r\n        var item_props = [];\r\n        var in_transit = [];\r\n        var delivery_handler = {};\r\n\r\n        //console.log(data);\r\n        this.setState({ customer: data.customer_info });\r\n        for (var i = 0; i < data.addresses.length; i++) {\r\n          if (data.addresses[i].Is_Billing == true)\r\n            billing_addrs.push(data.addresses[i]);\r\n          if (data.addresses[i].Is_Shipping == true)\r\n            shipping_addrs.push(data.addresses[i]);\r\n        }\r\n        this.setState({ billings: billing_addrs[0] });\r\n        this.setState({ shippings: shipping_addrs[0] });\r\n        for (var i = 0; i < data.deliveries.length; i++) {\r\n          if (data.deliveries[i].Delivered == true)\r\n            order_nos.push(data.deliveries[i]);\r\n          else in_transit.push(data.deliveries[i]);\r\n        }\r\n        in_transit.sort((a, b) => (b.Date > a.Date ? 1 : -1));\r\n        this.setState({ delivs: order_nos, transporting: in_transit[0] });\r\n\r\n        //items that have been delivered\r\n        /*for(var i = 0; i < data.deliveries.Purchased_Items.length; i++){\r\n             delivered_items.push(data.deliveries.Purchased_Items);\r\n             \r\n          }\r\n          this.setState({deliv_items: delivered_items[0]});*/\r\n\r\n        //Favorites\r\n        for (var i = 0; i < data.favorites.length; i++) {\r\n          item_props.push(data.favorites[i]);\r\n        }\r\n        this.setState({ favs: item_props });\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  handleLogout() {\r\n    console.log(\"I am logging out\");\r\n    axios.get(`https://chickpeaapi.glitch.me/login/logout`, {\r\n      withCredentials: true,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"account-page\">\r\n        <div id=\"account-header\" class=\"account-wrapper\">\r\n          <div id=\"name-image\">\r\n            <img src={account} class=\"account-image\"></img>\r\n            <h3 class=\"account-title\">Hello, {this.state.customer.Username}</h3>\r\n          </div>\r\n          <div id=\"logout-button\">\r\n            <a href=\"/home\">\r\n              <button\r\n                href=\"/home\"\r\n                class=\"purple-button btn\"\r\n                onClick={() => this.handleLogout()}\r\n              >\r\n                Logout\r\n              </button>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class=\"account-grid-container\">\r\n          <div id=\"left-column\">\r\n            <div id=\"profile-info\" class=\"account-grid-item\">\r\n              <h3>Account Information</h3>\r\n              <div class=\"info-block\" id=\"info-title\">\r\n                <p>Username </p>\r\n                <p>Email </p>\r\n                <p>Billing Address </p>\r\n                <p>Shipping Address </p>\r\n              </div>\r\n              <div class=\"info-block\">\r\n                <p> {this.state.customer.Username} </p>\r\n                <p> {this.state.customer.Email} </p>\r\n                <p>\r\n                  {this.state.billings.Street}, {this.state.billings.City},{\" \"}\r\n                  {this.state.billings.State}, {this.state.billings.Zip_Code}{\" \"}\r\n                </p>\r\n                <p>\r\n                  {this.state.shippings.Street}, {this.state.shippings.City},{\" \"}\r\n                  {this.state.shippings.State}, {this.state.shippings.Zip_Code}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div id=\"favorites\" class=\"account-grid-item\">\r\n              <h3>Favorites</h3>\r\n              <table>\r\n                <tr>\r\n                  <th class=\"item-column\">Item</th>\r\n                  <th class=\"store-column\">Store</th>\r\n                  <th class=\"price-column\">Price</th>\r\n                </tr>\r\n\r\n                {this.state.favs.map((favorites) => (\r\n                  <tr>\r\n                    <td>{favorites.Item_Name}</td>\r\n                    <td> {favorites.Store_ID} </td>\r\n                    <td>${favorites.Price.toFixed(2)}</td>\r\n                  </tr>\r\n                ))}\r\n              </table>\r\n            </div>\r\n          </div>\r\n          <div id=\"recent-order\" class=\"account-grid-item\">\r\n           <CurrentOrder\r\n              transporting={this.state.transporting}\r\n              shippings={this.state.shippings}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div id=\"order-history\" class=\"account-grid-item\">\r\n          <h3>Order History</h3>\r\n          <table>\r\n            <tr>\r\n              <th>Order Number</th>\r\n              <th>Date</th>\r\n              <th>Total Cost</th>\r\n              <th>Delivery Address</th>\r\n              <th>Items</th>\r\n            </tr>\r\n            {this.state.delivs.map((deliveries) => (\r\n              <tr>\r\n                <td>{deliveries.Delivery_ID}</td>\r\n                <td> {deliveries.Date} </td>\r\n                <td>${deliveries.Total_Cost}</td>\r\n                <td>\r\n                  {this.state.shippings.Street},{this.state.shippings.City},\r\n                  {this.state.shippings.State},{this.state.shippings.Zip_Code}\r\n                </td>\r\n                <td>this.state.deliv_items</td>\r\n              </tr>\r\n            ))}\r\n          </table>\r\n        </div>\r\n        <div id=\"extra-space-account\"></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/owner_placeholder.bdf1907b.png\";"],"sourceRoot":""}