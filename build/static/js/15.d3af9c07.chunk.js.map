{"version":3,"sources":["checkout/Checkout.js","../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"],"names":["DeliveryDetails","lazy","PaymentDetails","ReviewOrder","axios","defaults","withCredentials","Checkout","props","handleSubmit","event","preventDefault","state","Shipping_Street","Shipping_City","Shipping_State","Shipping_ZIP","Handler","Delivery_Instructions","Card_Name","Card_Number","CVV","Exp_Date","Billing_Street","Billing_City","Billing_State","Billing_ZIP","step","order_placed","componentDidMount","bind","handleChange","_next","_prev","this","setState","className","type","onClick","target","name","value","obj","key","Object","defineProperty","enumerable","configurable","writable","currentComponent","get","then","res","data","payments","length","shipping_addr","billing_addr","payment","addresses","address","Is_Billing","Street","City","State","ZIP","Zip_Code","Is_Shipping","Card_Num","toString","method","Handler_ID","JSON","parse","console","log","to","id","previousButton","nextButton","class","placeOrder","React","Component","_arrayLikeToArray","arr","len","i","arr2","Array","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","isArray","minLen","n","prototype","call","slice","constructor","from","test","F","s","done","e","_e","f","TypeError","err","normalCompletion","didErr","next","_e2"],"mappings":"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","file":"static/js/15.d3af9c07.chunk.js","sourcesContent":["import React, { lazy } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport \"./Checkout.css\";\nimport axios from 'axios'\n\n/* importing the form components\nnotes to self\n    - for each step of the checkout, save state on server side?\n*/\nconst DeliveryDetails = lazy(() => import(\"./DeliveryDetails\"));\nconst PaymentDetails = lazy(() => import(\"./PaymentDetails\"));\nconst ReviewOrder = lazy(() => import(\"./ReviewOrder\"));\n\naxios.defaults.withCredentials = true;\n\nexport default class Checkout extends React.Component {\n    constructor(props){\n        super(props);\n\n        this.state = {\n            step: 1,\n            Shipping_Street: \"\",\n            Shipping_City: \"\",\n            Shipping_State: \"\",\n            Shipping_ZIP: \"\",\n            Handler: {},\n            Delivery_Instructions: \"\",\n            Card_Number: \"\",\n            Card_Name: \"\",\n            CVV: \"\",\n            Exp_Date: '',\n            Billing_Street: \"\",\n            Billing_City: \"\",\n            Billing_State: \"\",\n            Billing_ZIP: \"\",\n            order_placed: null\n        }\n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this._next = this._next.bind(this);\n        this._prev = this._prev.bind(this);\n    }\n\n    _next() {\n        let step = this.state.step\n        // If the current step is 1 or 2, then add one on \"next\" button click\n        step = step >= 2? 3: step + 1\n        this.setState({\n          step: step\n        })\n      }\n    \n      _prev() {\n        let step = this.state.step\n        // If the current step is 2 or 3, then subtract one on \"previous\" button click\n        step = step <= 1? 1: step - 1\n        this.setState({\n          step: step\n        })\n      }\n      // The \"next\" and \"previous\" button functions\nget previousButton(){\n    let step = this.state.step;\n    // If the current step is not 1, then render the \"previous\" button\n    if(step !==1){\n      return (\n        <button \n        className=\"btn\" \n        type=\"button\" \n        onClick={this._prev}>\n            Previous\n        </button>\n      )\n    }\n    // ...else return nothing\n    return null;\n  }\n  \n  get nextButton(){\n    let step = this.state.step;\n    // If the current step is not 3, then render the \"next\" button\n    if(step <3){\n      return (\n        <button \n        className=\"btn float-right\" \n        type=\"button\" \n        onClick={this._next}>\n          Next\n        </button> \n      )\n    }\n    // ...else render nothing\n    return null;\n  }\n\n    handleChange(event) {\n        const {name, value} = event.target;\n        this.setState({\n            [name]: value\n        })\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault()\n        const { \n            Shipping_Street, \n            Shipping_City, \n            Shipping_State, \n            Shipping_ZIP,\n            Handler,\n            Delivery_Instructions,\n            Card_Name,\n            Card_Number,\n            CVV,\n            Exp_Date,\n            Billing_Street,\n            Billing_City,\n            Billing_State,\n            Billing_ZIP\n         } = this.state\n         //alert(`${JSON.parse(Handler).Handler_ID}`)\n      }\n\n    componentDidMount(){\n      let currentComponent = this;\n      axios.get(`https://chickpeaapi.glitch.me/user/account-details`)\n        .then((res) => {\n          if(res.data.payments.length !== 0){\n            const data = res.data;\n            var shipping_addr = {};\n            var billing_addr = {};\n            var payment = {};\n            // getting addresses\n            for(var address of data.addresses){\n              if(address.Is_Billing){\n                billing_addr.Street = address.Street;\n                billing_addr.City = address.City;\n                billing_addr.State = address.State;\n                billing_addr.ZIP = address.Zip_Code;\n              }\n              if(address.Is_Shipping){\n                shipping_addr.Street = address.Street;\n                shipping_addr.City = address.City;\n                shipping_addr.State = address.State;\n                shipping_addr.ZIP = address.Zip_Code;\n              }\n            }\n  \n            // getting payment\n            payment.Card_Name = data.payments[0].Card_Name;\n            payment.Card_Number = data.payments[0].Card_Num;\n            payment.CVV = data.payments[0].CVV;\n            payment.Exp_Date = data.payments[0].Exp_Date;\n  \n            // setting the state\n            currentComponent.setState({\n              Shipping_Street: shipping_addr.Street,\n              Shipping_City: shipping_addr.City,\n              Shipping_State: shipping_addr.State,\n              Shipping_ZIP: shipping_addr.ZIP,\n              Card_Number: payment.Card_Number.toString(),\n              Card_Name: payment.Card_Name,\n              CVV: payment.CVV,\n              Exp_Date: payment.Exp_Date,\n              Billing_Street: billing_addr.Street,\n              Billing_City: billing_addr.City,\n              Billing_State: billing_addr.State,\n              Billing_ZIP: billing_addr.ZIP\n            })\n          }\n        })\n    }\n\n    placeOrder(){\n      axios(`https://chickpeaapi.glitch.me/checkout`,{\n        method: 'post',\n        data: {\n          Shipping_Street: this.state.Shipping_Street,\n          Shipping_City: this.state.Shipping_City,\n          Shipping_State: this.state.Shipping_State,\n          Shipping_ZIP: this.state.Shipping_ZIP,\n          Delivery_Instructions: this.state.Delivery_Instructions,\n          Billing_Street: this.state.Billing_Street,\n          Billing_City: this.state.Billing_City,\n          Billing_State: this.state.Billing_State,\n          Billing_ZIP: this.state.Billing_ZIP,\n          Handler_ID: JSON.parse(this.state.Handler).Handler_ID\n        }\n      })\n        .then((res) => {\n          console.log(res);\n          this.setState({order_placed: true});\n        })\n    }\n\n    render() {\n        if(this.state.order_placed){\n          return(\n            <Redirect to=\"/order-placed\" />\n        );\n        }\n        return (\n            <div id=\"checkout-page\">\n                <h1>Checkout</h1>\n                <p>If you have ordered with us before, Chickpea will prefill these fields with your personal information.</p>\n                    <DeliveryDetails\n                        step = {this.state.step}\n                        handleChange = {this.handleChange}\n                        Shipping_Street = {this.state.Shipping_Street}\n                        Shipping_City = {this.state.Shipping_City}\n                        Shipping_State = {this.state.Shipping_State}\n                        Shipping_ZIP = {this.state.Shipping_ZIP}\n                        Delivery_Instructions = {this.state.Delivery_Instructions}\n                        Handler = {this.state.Handler}\n                    />\n                    <PaymentDetails \n                        step = {this.state.step}\n                        handleChange = {this.handleChange}\n                        Card_Name = {this.state.Card_Name}\n                        Card_Number = {this.state.Card_Number}\n                        CVV = {this.state.CVV}\n                        Exp_Date = {this.state.Exp_Date}\n                        Billing_Street = {this.state.Billing_Street}\n                        Billing_City = {this.state.Billing_City}\n                        Billing_State = {this.state.Billing_State}\n                        Billing_ZIP = {this.state.Billing_ZIP}\n                    />\n                    <ReviewOrder\n                      step = {this.state.step}\n                      Shipping_Street = {this.state.Shipping_Street}\n                      Shipping_City = {this.state.Shipping_City}\n                      Shipping_State = {this.state.Shipping_State}\n                      Shipping_ZIP = {this.state.Shipping_ZIP}\n                      Handler = {this.state.Handler}\n                      Delivery_Instructions = {this.state.Delivery_Instructions}\n                      Card_Name = {this.state.Card_Name}\n                      Card_Number = {this.state.Card_Number}\n                      CVV = {this.state.CVV}\n                      Exp_Date = {this.state.Exp_Date}\n                      Billing_Street = {this.state.Billing_Street}\n                      Billing_City = {this.state.Billing_City}\n                      Billing_State = {this.state.Billing_State}\n                      Billing_ZIP = {this.state.Billing_ZIP}\n                    />\n                    {this.previousButton}\n                    {this.nextButton}\n                    {this.state.step == 3 &&\n                    <div>\n                        <button class=\"btn float-right\" type=\"submit\" onClick={()=>this.placeOrder()}>Place Order</button>\n                    </div>}\n            </div>\n        )\n    }\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}"],"sourceRoot":""}