{"version":3,"sources":["account/Account.js","assets/owner_placeholder.png"],"names":["CurrentOrder","lazy","axios","defaults","withCredentials","timeReceived","Account","state","customer","addresses","billings","shippings","deliveries","delivs","transporting","transits","deliv_items","favs","handlers","handler","items","store","get","then","res","data","billing_addrs","favorites","Favorite_Items","shipping_addrs","order_nos","item_props","in_transit","today","Date","currentTime","getHours","getMinutes","getSeconds","console","log","timeElapsed","Math","floor","ceil","expectedDeliveryPercentage","setState","customer_info","i","length","Is_Billing","push","Is_Shipping","Delivered","sort","a","b","catch","error","id","class","src","account","this","Username","href","onClick","handleLogout","Email","Street","City","State","Zip_Code","map","Item_Name","Store_ID","Price","toFixed","Delivery_ID","Total_Cost","React","Component"],"mappings":"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","file":"static/js/14.11c1a940.chunk.js","sourcesContent":["import React, { lazy } from \"react\";\nimport axios from \"axios\";\nimport \"./Account.css\";\nimport account from \"../assets/owner_placeholder.png\";\n\nconst CurrentOrder = lazy(() => import(\"./CurrentOrder\"));\n\naxios.defaults.withCredentials = true;\n\nvar timeReceived = 10000; //new Date('2021-04-29T03:24:00')\n\n// Set the time of the active delivery for calculating the progress bar\n// This should only be called once when the page is rendered\n// This function may be modified to include travering the order array to find the active order\nfunction setTimeReceived(activeDeliveryInfo) {\n  timeReceived = activeDeliveryInfo.Date;\n}\n\n// Calculate the time percentage for the progress bar\nfunction expectedDeliveryPercentage() {\n  // Get the current time\n  var today = new Date();\n  var currentTime =\n    today.getHours() * 3600 + today.getMinutes() * 60 + today.getSeconds() / 60;\n  console.log(currentTime);\n  //const currentTime = Date.now();\n  //console.log(currentTime.toString());\n\n  // Calculate the number of minutes passed since the order was made\n  // Just subtracting returns the time in milliseconds, so the floor of milliseconds/60,000 converts to minutes\n  // For purposes of easy simming the dividing number can be changed to 1,000\n  const timeElapsed = Math.floor((timeReceived - currentTime) / 60000);\n  // Calculate the percentage of an hour that has ellapsed, rounded for nicer numbers\n  const deliveryPercentage = Math.ceil((timeElapsed / 60) * 100);\n\n  return deliveryPercentage;\n}\n\nfunction orderStatus(deliveryPercentage) {\n  var status;\n  if (deliveryPercentage < 10) {\n    status = \"Recieving your order\";\n  } else if (deliveryPercentage < 50) {\n    status = \"Gathering items\";\n  } else if (deliveryPercentage < 60) {\n    status = \"Handler is on their way to the store(s)\";\n  } else if (deliveryPercentage < 100) {\n    status = \"Delivery is on its way\";\n  } else {\n    status = \"Delivered!\";\n  }\n  return status;\n}\n\nexport default class Account extends React.Component {\n  state = {\n    customer: {},\n    addresses: [],\n    billings: [],\n    shippings: [],\n    deliveries: [],\n    delivs: [],\n    transporting: [],\n    transits: [],\n    deliv_items: [],\n    favs: [],\n    handlers: [],\n    handler: {},\n    items: [],\n    store: [],\n  };\n\n  componentDidMount() {\n    axios\n      .get(\n        `https://chickpeaapi.glitch.me/user/account-details`,\n        /*`https://chickpeaapi.glitch.me/stores`,*/ { withCredentials: true }\n      )\n      .then((res) => {\n        const data = res.data;\n        const favorite = res.data.favorites.Favorite_Items;\n        var billing_addrs = [];\n        var shipping_addrs = [];\n        var order_nos = [];\n        var delivered_items = [];\n        var item_props = [];\n        var in_transit = [];\n        var delivery_handler = {};\n        var deliveryPrcnt = expectedDeliveryPercentage();\n\n        //console.log(data);\n        this.setState({ customer: data.customer_info });\n        for (var i = 0; i < data.addresses.length; i++) {\n          if (data.addresses[i].Is_Billing == true)\n            billing_addrs.push(data.addresses[i]);\n          if (data.addresses[i].Is_Shipping == true)\n            shipping_addrs.push(data.addresses[i]);\n        }\n        this.setState({ billings: billing_addrs[0] });\n        this.setState({ shippings: shipping_addrs[0] });\n        for (var i = 0; i < data.deliveries.length; i++) {\n          if (data.deliveries[i].Delivered == true)\n            order_nos.push(data.deliveries[i]);\n          else in_transit.push(data.deliveries[i]);\n        }\n        in_transit.sort((a, b) => (b.Date > a.Date ? 1 : -1));\n        this.setState({ delivs: order_nos, transporting: in_transit[0] });\n\n        //items that have been delivered\n        /*for(var i = 0; i < data.deliveries.Purchased_Items.length; i++){\n             delivered_items.push(data.deliveries.Purchased_Items);\n             \n          }\n          this.setState({deliv_items: delivered_items[0]});*/\n\n        //Favorites\n        for (var i = 0; i < data.favorites.length; i++) {\n          item_props.push(data.favorites[i]);\n        }\n        this.setState({ favs: item_props });\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  handleLogout() {\n    console.log(\"I am logging out\");\n    axios.get(`https://chickpeaapi.glitch.me/login/logout`, {\n      withCredentials: true,\n    });\n  }\n\n  render() {\n    return (\n      <div id=\"account-page\">\n        <div id=\"account-header\" class=\"account-wrapper\">\n          <div id=\"name-image\">\n            <img src={account} class=\"account-image\"></img>\n            <h3 class=\"account-title\">Hello, {this.state.customer.Username}</h3>\n          </div>\n          <div id=\"logout-button\">\n            <a href=\"/home\">\n              <button\n                href=\"/home\"\n                class=\"purple-button btn\"\n                onClick={() => this.handleLogout()}\n              >\n                Logout\n              </button>\n            </a>\n          </div>\n        </div>\n        <div class=\"account-grid-container\">\n          <div id=\"left-column\">\n            <div id=\"profile-info\" class=\"account-grid-item\">\n              <h3>Account Information</h3>\n              <div class=\"info-block\" id=\"info-title\">\n                <p>Username </p>\n                <p>Email </p>\n                <p>Billing Address </p>\n                <p>Shipping Address </p>\n              </div>\n              <div class=\"info-block\">\n                <p> {this.state.customer.Username} </p>\n                <p> {this.state.customer.Email} </p>\n                <p>\n                  {this.state.billings.Street}, {this.state.billings.City},{\" \"}\n                  {this.state.billings.State}, {this.state.billings.Zip_Code}{\" \"}\n                </p>\n                <p>\n                  {this.state.shippings.Street}, {this.state.shippings.City},{\" \"}\n                  {this.state.shippings.State}, {this.state.shippings.Zip_Code}\n                </p>\n              </div>\n            </div>\n            <div id=\"favorites\" class=\"account-grid-item\">\n              <h3>Favorites</h3>\n              <table>\n                <tr>\n                  <th class=\"item-column\">Item</th>\n                  <th class=\"store-column\">Store</th>\n                  <th class=\"price-column\">Price</th>\n                </tr>\n\n                {this.state.favs.map((favorites) => (\n                  <tr>\n                    <td>{favorites.Item_Name}</td>\n                    <td> {favorites.Store_ID} </td>\n                    <td>${favorites.Price.toFixed(2)}</td>\n                  </tr>\n                ))}\n              </table>\n            </div>\n          </div>\n          <div id=\"recent-order\" class=\"account-grid-item\">\n            <CurrentOrder\n              transporting={this.state.transporting}\n              shippings={this.state.shippings}\n            />\n          </div>\n        </div>\n        <div id=\"order-history\" class=\"account-grid-item\">\n          <h3>Order History</h3>\n          <table>\n            <tr>\n              <th>Order Number</th>\n              <th>Date</th>\n              <th>Total Cost</th>\n              <th>Delivery Address</th>\n              <th>Items</th>\n            </tr>\n            {this.state.delivs.map((deliveries) => (\n              <tr>\n                <td>{deliveries.Delivery_ID}</td>\n                <td> {deliveries.Date} </td>\n                <td>${deliveries.Total_Cost}</td>\n                <td>\n                  {this.state.shippings.Street},{this.state.shippings.City},\n                  {this.state.shippings.State},{this.state.shippings.Zip_Code}\n                </td>\n                <td>this.state.deliv_items</td>\n              </tr>\n            ))}\n          </table>\n        </div>\n        <div id=\"extra-space-account\"></div>\n      </div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/owner_placeholder.bdf1907b.png\";"],"sourceRoot":""}